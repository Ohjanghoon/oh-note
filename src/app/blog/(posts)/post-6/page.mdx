export const metadata = {
  title: "블로그 TOC 테스트",
  publishDate: "2024-01-01T00:00:00Z",
  thumbnailUrl:
    "https://images.unsplash.com/photo-1669023414166-a4cc7c0fe1f5?q=80&w=3132&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D",
  tags: [],
};

<BlogHeader {...metadata} />

<article className="blog-content-article">
# 블로그 TOC 테스트

## 소개

이 문서는 Table of Contents(TOC) 기능을 테스트하기 위한 긴 글입니다. 스크롤을 하면서 TOC가 정상적으로 동작하는지 확인해보세요.

## TOC란?

TOC(Table of Contents)는 문서의 목차를 의미합니다. 문서의 구조를 한눈에 볼 수 있도록 도와줍니다.

### TOC의 필요성

긴 글을 작성할 때 TOC가 있다면 사용자가 원하는 내용을 쉽게 찾을 수 있습니다.

### TOC의 구성 요소

1. 제목과 하위 제목
2. 클릭 시 해당 섹션으로 이동하는 기능
3. 현재 위치한 섹션의 강조 표시

## TOC 사용 방법

TOC를 구현하는 방법에는 여러 가지가 있습니다.

### 라이브러리 활용

기본적으로 `react-toc` 같은 라이브러리를 사용할 수도 있지만, 직접 구현할 수도 있습니다.

### 직접 구현하기

1. HTML의 `h1, h2, h3` 태그를 추출합니다.
2. `IntersectionObserver`를 활용하여 현재 보고 있는 섹션을 감지합니다.
3. 감지된 섹션을 기반으로 TOC에서 활성화된 항목을 강조합니다.

## 구현 예제

다음은 TOC를 직접 구현하는 코드 예제입니다.

```tsx
useEffect(() => {
  const headings = document.querySelectorAll("h1, h2, h3");
  const observer = new IntersectionObserver((entries) => {
    entries.forEach((entry) => {
      if (entry.isIntersecting) {
        setActiveId(entry.target.id);
      }
    });
  });
  headings.forEach((heading) => observer.observe(heading));
  return () => observer.disconnect();
}, []);
```

## 상세 설명

### 제목 추출

문서의 제목(`h1, h2, h3`)을 선택자로 가져와 TOC를 구성합니다.

### 스크롤 감지

`IntersectionObserver`를 사용하여 현재 화면에 보이는 제목을 감지합니다.

### 활성화된 제목 강조

현재 활성화된 제목을 상태로 관리하고, TOC에서 강조 표시합니다.

## 결론

TOC를 활용하면 문서의 가독성이 향상되고, 사용자가 원하는 정보를 쉽게 찾을 수 있습니다.

## 추가 테스트

더 많은 내용을 추가하여 TOC의 스크롤 반응을 확인해보세요.

### 테스트 1

이제 이 섹션까지 내려와서 TOC가 정상적으로 반응하는지 확인하세요.

### 테스트 2

TOC 항목을 클릭하면 해당 섹션으로 스크롤이 이동하는지 확인하세요.

### 테스트 3

스크롤을 올리면서 TOC가 다시 원래대로 돌아오는지 확인하세요.

</article>
